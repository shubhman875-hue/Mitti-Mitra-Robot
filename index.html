<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitti Mitra Robot - Smart Farming Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #1e1e3f 0%, #2d2d5f 50%, #1a1a3e 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #fff;
            font-weight: 600;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 15px;
        }

        .language-selector {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
            font-size: 14px;
            cursor: pointer;
        }

        .status-bar {
            padding: 16px 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff88;
            box-shadow: 0 0 10px #00ff88;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Region Selector */
        .region-selector-container {
            margin-bottom: 15px;
        }

        .region-selector {
            width: 100%;
            padding: 14px 18px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            color: white;
            font-size: 15px;
            cursor: pointer;
        }

        .region-selector option {
            background: #2d2d5f;
            color: white;
        }

        /* Weather Scroll */
        .weather-scroll-container {
            margin-bottom: 25px;
        }

        .weather-scroll {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 15px;
            scroll-behavior: smooth;
        }

        .weather-scroll::-webkit-scrollbar {
            height: 4px;
        }

        .weather-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .weather-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .weather-card {
            min-width: 180px;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
        }

        .weather-city {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .weather-temp {
            font-size: 42px;
            font-weight: bold;
            color: #00ff88;
            margin: 10px 0;
        }

        .weather-condition {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px;
        }

        .weather-details {
            display: flex;
            justify-content: space-around;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Sensor Cards */
        .sensor-section {
            margin-bottom: 25px;
        }

        .sensor-card {
            padding: 22px;
            border-radius: 16px;
            margin-bottom: 15px;
        }

        .sensor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
        }

        .sensor-name {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sensor-badge {
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-optimal {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .badge-warning {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        .badge-critical {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .sensor-value {
            font-size: 48px;
            font-weight: bold;
            color: #fff;
            margin: 12px 0;
        }

        .sensor-range {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 12px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-optimal { background: linear-gradient(90deg, #00ff88, #00d9ff); }
        .progress-warning { background: linear-gradient(90deg, #ff9800, #ffb142); }
        .progress-critical { background: linear-gradient(90deg, #f44336, #ff1744); }

        /* Recommendations */
        .recommendations-section {
            margin-bottom: 25px;
        }

        .recommendation-card {
            padding: 18px;
            border-radius: 16px;
            margin-bottom: 12px;
        }

        .recommendation-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .recommendation-action {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            margin-left: 18px;
            display: block;
            margin-top: 6px;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00ff88 0%, #00d9ff 100%);
            color: #1e1e3f;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <select class="language-selector" id="languageSelector" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
            </select>
            <h1><span id="appTitle">üåæ Mitti Mitra Robot</span></h1>
            <p class="subtitle" id="subtitle">Smart Farming Assistant</p>
        </div>

        <div class="status-bar glass">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span id="statusText">Connected</span>
            </div>
            <div style="font-size: 13px; color: rgba(255,255,255,0.7);" id="lastUpdate">2 min ago</div>
        </div>

        <!-- Weather with Region Selector -->
        <div class="weather-scroll-container">
            <h3 class="section-title" id="weatherTitle">üå¶Ô∏è Weather Forecast</h3>
            
            <div class="region-selector-container">
                <select class="region-selector glass" id="regionSelector" onchange="changeRegion()">
                    <option value="Delhi,IN">Delhi NCR</option>
                    <option value="Panchkula,IN">Panchkula, Haryana</option>
                    <option value="Chandigarh,IN">Chandigarh</option>
                    <option value="Gurugram,IN">Gurugram, Haryana</option>
                    <option value="Faridabad,IN">Faridabad, Haryana</option>
                    <option value="Mumbai,IN">Mumbai, Maharashtra</option>
                    <option value="Pune,IN">Pune, Maharashtra</option>
                    <option value="Bangalore,IN">Bangalore, Karnataka</option>
                    <option value="Chennai,IN">Chennai, Tamil Nadu</option>
                    <option value="Hyderabad,IN">Hyderabad, Telangana</option>
                    <option value="Kolkata,IN">Kolkata, West Bengal</option>
                    <option value="Ahmedabad,IN">Ahmedabad, Gujarat</option>
                    <option value="Jaipur,IN">Jaipur, Rajasthan</option>
                    <option value="Lucknow,IN">Lucknow, Uttar Pradesh</option>
                    <option value="Kanpur,IN">Kanpur, Uttar Pradesh</option>
                    <option value="Patna,IN">Patna, Bihar</option>
                    <option value="Bhubaneswar,IN">Bhubaneswar, Odisha</option>
                    <option value="Ranchi,IN">Ranchi, Jharkhand</option>
                    <option value="Raipur,IN">Raipur, Chhattisgarh</option>
                    <option value="Guwahati,IN">Guwahati, Assam</option>
                    <option value="Dehradun,IN">Dehradun, Uttarakhand</option>
                    <option value="Shimla,IN">Shimla, Himachal Pradesh</option>
                    <option value="Srinagar,IN">Srinagar, J&K</option>
                    <option value="Thiruvananthapuram,IN">Thiruvananthapuram, Kerala</option>
                    <option value="Kochi,IN">Kochi, Kerala</option>
                    <option value="Visakhapatnam,IN">Visakhapatnam, Andhra Pradesh</option>
                    <option value="Vijayawada,IN">Vijayawada, Andhra Pradesh</option>
                    <option value="Coimbatore,IN">Coimbatore, Tamil Nadu</option>
                    <option value="Madurai,IN">Madurai, Tamil Nadu</option>
                    <option value="Mysore,IN">Mysore, Karnataka</option>
                    <option value="Nagpur,IN">Nagpur, Maharashtra</option>
                    <option value="Indore,IN">Indore, Madhya Pradesh</option>
                    <option value="Bhopal,IN">Bhopal, Madhya Pradesh</option>
                    <option value="Surat,IN">Surat, Gujarat</option>
                    <option value="Ludhiana,IN">Ludhiana, Punjab</option>
                    <option value="Amritsar,IN">Amritsar, Punjab</option>
                </select>
            </div>
            
            <div class="weather-scroll" id="weatherScroll">
                <div class="loading">Loading weather data...</div>
            </div>
        </div>

        <!-- Sensor Readings -->
        <div class="sensor-section">
            <h3 class="section-title" id="sensorTitle">üìä Sensor Readings</h3>
            
            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üå°Ô∏è</span> <span id="phLabel">pH Level</span></div>
                    <span class="sensor-badge badge-optimal"><span id="optimalText">Optimal</span></span>
                </div>
                <div class="sensor-value">6.5</div>
                <div class="sensor-range"><span id="rangeText">Range:</span> 6.0-7.5</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-optimal" style="width: 87%;"></div>
                </div>
            </div>

            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üíß</span> <span id="moistureLabel">Moisture</span></div>
                    <span class="sensor-badge badge-warning"><span id="lowText">Low</span></span>
                </div>
                <div class="sensor-value">45%</div>
                <div class="sensor-range"><span id="rangeText2">Range:</span> 60-80% optimal</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-warning" style="width: 45%;"></div>
                </div>
            </div>

            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üå±</span> <span id="nitrogenLabel">Nitrogen</span></div>
                    <span class="sensor-badge badge-critical"><span id="criticalText">Critical</span></span>
                </div>
                <div class="sensor-value" id="lowValue">Low</div>
                <div class="sensor-range">Green Index: 95/255</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-critical" style="width: 30%;"></div>
                </div>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="recommendations-section">
            <h3 class="section-title" id="recommendTitle">üí° Recommendations</h3>
            
            <div class="recommendation-card glass">
                <div class="recommendation-title" id="rec1">‚ö†Ô∏è Soil is dry</div>
                <span class="recommendation-action" id="rec1a">‚Üí Water immediately</span>
                <span class="recommendation-action" id="rec1b">‚Üí Apply mulch layer</span>
            </div>

            <div class="recommendation-card glass">
                <div class="recommendation-title" id="rec2">üî¥ Nitrogen deficiency</div>
                <span class="recommendation-action" id="rec2a">‚Üí Add Neem Cake: 50g/plant</span>
                <span class="recommendation-action" id="rec2b">‚Üí Or Vermicompost: 200g</span>
                <span class="recommendation-action" id="rec2c">‚Üí Jeevamrit spray weekly</span>
            </div>

            <div class="recommendation-card glass">
                <div class="recommendation-title" id="rec3">‚úÖ pH is optimal</div>
                <span class="recommendation-action" id="rec3a">‚Üí No action needed</span>
            </div>
        </div>

        <!-- Buttons -->
        <div class="button-group">
            <button class="btn btn-primary" onclick="refreshData()">
                <span>üîÑ</span>
                <span id="refreshBtn">Refresh</span>
            </button>
            <button class="btn btn-secondary" onclick="showHistory()">
                <span>üìä</span>
                <span id="historyBtn">History</span>
            </button>
        </div>
    </div>

    <script>
        const API_KEY = '3045dd712ffe6e702e3245525ac7fa38'; // OpenWeatherMap API key
        
        const translations = {
            en: {
                appTitle: 'üåæ Mitti Mitra Robot',
                subtitle: 'Smart Farming Assistant',
                statusText: 'Connected',
                weatherTitle: 'üå¶Ô∏è Weather Forecast',
                sensorTitle: 'üìä Sensor Readings',
                recommendTitle: 'üí° Recommendations',
                phLabel: 'pH Level',
                moistureLabel: 'Moisture',
                nitrogenLabel: 'Nitrogen',
                optimalText: 'Optimal',
                lowText: 'Low',
                criticalText: 'Critical',
                lowValue: 'Low',
                rangeText: 'Range:',
                rangeText2: 'Range:',
                refreshBtn: 'Refresh',
                historyBtn: 'History',
                rec1: '‚ö†Ô∏è Soil is dry',
                rec1a: '‚Üí Water immediately',
                rec1b: '‚Üí Apply mulch layer',
                rec2: 'üî¥ Nitrogen deficiency',
                rec2a: '‚Üí Add Neem Cake: 50g/plant',
                rec2b: '‚Üí Or Vermicompost: 200g',
                rec2c: '‚Üí Jeevamrit spray weekly',
                rec3: '‚úÖ pH is optimal',
                rec3a: '‚Üí No action needed'
            },
            hi: {
                appTitle: 'üåæ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡§ø‡§§‡•ç‡§∞ ‡§∞‡•ã‡§¨‡•ã‡§ü',
                subtitle: '‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•á‡§§‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï',
                statusText: '‡§ú‡•Å‡§°‡§º‡§æ ‡§π‡•Å‡§Ü',
                weatherTitle: 'üå¶Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                sensorTitle: 'üìä ‡§∏‡•á‡§Ç‡§∏‡§∞ ‡§∞‡•Ä‡§°‡§ø‡§Ç‡§ó',
                recommendTitle: 'üí° ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç',
                phLabel: '‡§™‡•Ä‡§è‡§ö ‡§∏‡•ç‡§§‡§∞',
                moistureLabel: '‡§®‡§Æ‡•Ä',
                nitrogenLabel: '‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§®',
                optimalText: '‡§á‡§∑‡•ç‡§ü‡§§‡§Æ',
                lowText: '‡§ï‡§Æ',
                criticalText: '‡§ó‡§Ç‡§≠‡•Ä‡§∞',
                lowValue: '‡§ï‡§Æ',
                rangeText: '‡§∏‡•Ä‡§Æ‡§æ:',
                rangeText2: '‡§∏‡•Ä‡§Æ‡§æ:',
                refreshBtn: '‡§∞‡•Ä‡§´‡•ç‡§∞‡•á‡§∂',
                historyBtn: '‡§á‡§§‡§ø‡§π‡§æ‡§∏'
            }
        };

        async function fetchWeatherForRegion(location) {
            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=${API_KEY}&units=metric`
                );
                
                if (!response.ok) throw new Error('Weather data fetch failed');
                
                const data = await response.json();
                
                return {
                    city: data.name,
                    temp: Math.round(data.main.temp),
                    condition: data.weather[0].main,
                    humidity: data.main.humidity,
                    wind: Math.round(data.wind.speed * 3.6) // Convert m/s to km/h
                };
            } catch (error) {
                console.error('Error fetching weather:', error);
                return null;
            }
        }

        async function changeRegion() {
            const selector = document.getElementById('regionSelector');
            const location = selector.value;
            const container = document.getElementById('weatherScroll');
            
            container.innerHTML = '<div class="loading">Loading weather data...</div>';
            
            // Fetch weather for selected region and nearby cities
 