<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitti Mitra Robot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #1a1f3a 0%, #2d3561 50%, #1e243e 100%);
            min-height: 100vh;
            color: #c9d1d9;
            padding: 15px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .glass {
            background: rgba(30, 36, 62, 0.6);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            padding-top: 10px;
        }

        .header h1 {
            font-size: 26px;
            margin-bottom: 6px;
            color: #ffffff;
            font-weight: 600;
        }

        .subtitle {
            color: rgba(201, 209, 217, 0.6);
            font-size: 14px;
        }

        .language-selector {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(30, 36, 62, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 8px 15px;
            border-radius: 20px;
            color: #c9d1d9;
            font-size: 13px;
            cursor: pointer;
        }

        .status-bar {
            padding: 14px 18px;
            border-radius: 15px;
            margin-bottom: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4ade80;
            box-shadow: 0 0 12px #4ade80;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .region-selector-container {
            margin-bottom: 12px;
        }

        .region-selector {
            width: 100%;
            padding: 12px 16px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(30, 36, 62, 0.7);
            backdrop-filter: blur(20px);
            color: #c9d1d9;
            font-size: 14px;
            cursor: pointer;
        }

        .region-selector option {
            background: #2d3561;
            color: #ffffff;
        }

        .weather-scroll-container {
            margin-bottom: 20px;
        }

        .weather-scroll {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 12px;
            scroll-behavior: smooth;
        }

        .weather-scroll::-webkit-scrollbar {
            height: 4px;
        }

        .weather-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }

        .weather-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
        }

        .weather-card {
            min-width: 170px;
            padding: 18px;
            border-radius: 14px;
            text-align: center;
            flex-shrink: 0;
        }

        .weather-city {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .weather-temp {
            font-size: 38px;
            font-weight: bold;
            color: #4ade80;
            margin: 8px 0;
        }

        .weather-condition {
            font-size: 13px;
            color: rgba(201, 209, 217, 0.6);
            margin-bottom: 10px;
        }

        .weather-details {
            display: flex;
            justify-content: space-around;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            font-size: 12px;
            color: rgba(201, 209, 217, 0.6);
        }

        .sensor-section {
            margin-bottom: 20px;
        }

        .sensor-card {
            padding: 20px;
            border-radius: 14px;
            margin-bottom: 12px;
        }

        .sensor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .sensor-name {
            font-size: 14px;
            color: rgba(201, 209, 217, 0.7);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .sensor-badge {
            padding: 5px 12px;
            border-radius: 14px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-optimal {
            background: rgba(74, 222, 128, 0.15);
            color: #4ade80;
            border: 1px solid rgba(74, 222, 128, 0.3);
        }

        .badge-warning {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
            border: 1px solid rgba(251, 146, 60, 0.3);
        }

        .badge-critical {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .sensor-value {
            font-size: 42px;
            font-weight: bold;
            color: #ffffff;
            margin: 10px 0;
        }

        .sensor-range {
            font-size: 12px;
            color: rgba(201, 209, 217, 0.5);
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 5px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-optimal { background: linear-gradient(90deg, #4ade80, #22d3ee); }
        .progress-warning { background: linear-gradient(90deg, #fb923c, #f59e0b); }
        .progress-critical { background: linear-gradient(90deg, #ef4444, #dc2626); }

        .recommendations-section {
            margin-bottom: 20px;
        }

        .recommendation-card {
            padding: 16px;
            border-radius: 14px;
            margin-bottom: 10px;
        }

        .recommendation-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .recommendation-action {
            font-size: 13px;
            color: rgba(201, 209, 217, 0.6);
            margin-left: 16px;
            display: block;
            margin-top: 5px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 14px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
            color: #1a1f3a;
        }

        .btn-secondary {
            background: rgba(30, 36, 62, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #c9d1d9;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: rgba(201, 209, 217, 0.5);
            font-size: 13px;
        }

        @media (max-width: 600px) {
            .language-selector {
                position: static;
                margin: 0 auto 15px;
                display: block;
                width: fit-content;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <select class="language-selector" id="langSelect">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
                <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</option>
            </select>
            <h1 id="title">Mitti Mitra Robot</h1>
            <p class="subtitle" id="sub">Smart Farming Assistant</p>
        </div>

        <div class="status-bar glass">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span id="status">Connected</span>
            </div>
            <div style="font-size: 12px;" id="time">2 min ago</div>
        </div>

        <div class="weather-scroll-container">
            <h3 class="section-title" id="wtitle">üå¶Ô∏è Weather Forecast</h3>
            
            <div class="region-selector-container">
                <select class="region-selector glass" id="regionSelect">
                    <optgroup label="Chandigarh Tricity">
                        <option value="30.3919,76.6241">Panchkula, Haryana</option>
                        <option value="30.7333,76.7794">Chandigarh</option>
                        <option value="30.8498,76.8303">Mohali, Punjab</option>
                    </optgroup>
                    <optgroup label="Haryana">
                        <option value="28.4595,77.0266">Gurugram</option>
                        <option value="28.7041,77.1025">Faridabad</option>
                        <option value="30.1575,77.2840">Ambala</option>
                        <option value="29.3803,76.9694">Karnal</option>
                        <option value="28.9931,76.8672">Panipat</option>
                    </optgroup>
                    <optgroup label="Punjab">
                        <option value="30.9010,75.8573">Ludhiana</option>
                        <option value="31.6340,74.8723">Amritsar</option>
                        <option value="31.3260,75.5762">Jalandhar</option>
                        <option value="30.7046,76.7179">Patiala</option>
                    </optgroup>
                    <optgroup label="Delhi NCR">
                        <option value="28.6139,77.2090">Delhi</option>
                        <option value="28.6692,77.4538">Noida</option>
                        <option value="28.6304,77.3768">Ghaziabad</option>
                    </optgroup>
                    <optgroup label="Major Cities">
                        <option value="19.0760,72.8777">Mumbai</option>
                        <option value="12.9716,77.5946">Bangalore</option>
                        <option value="13.0827,80.2707">Chennai</option>
                        <option value="22.5726,88.3639">Kolkata</option>
                        <option value="17.3850,78.4867">Hyderabad</option>
                        <option value="18.5204,73.8567">Pune</option>
                        <option value="23.0225,72.5714">Ahmedabad</option>
                        <option value="26.9124,75.7873">Jaipur</option>
                    </optgroup>
                </select>
            </div>
            
            <div class="weather-scroll" id="weatherBox">
                <div class="loading">Loading weather...</div>
            </div>
        </div>

        <div class="sensor-section">
            <h3 class="section-title" id="stitle">üìä Sensor Readings</h3>
            
            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üå°Ô∏è</span> <span id="ph">pH Level</span></div>
                    <span class="sensor-badge badge-optimal"><span id="opt">Optimal</span></span>
                </div>
                <div class="sensor-value">6.5</div>
                <div class="sensor-range"><span id="r1">Range:</span> 6.0-7.5</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-optimal" style="width: 87%;"></div>
                </div>
            </div>

            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üíß</span> <span id="moist">Moisture</span></div>
                    <span class="sensor-badge badge-warning"><span id="low">Low</span></span>
                </div>
                <div class="sensor-value">45%</div>
                <div class="sensor-range"><span id="r2">Range:</span> 60-80% optimal</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-warning" style="width: 45%;"></div>
                </div>
            </div>

            <div class="sensor-card glass">
                <div class="sensor-header">
                    <div class="sensor-name"><span>üå±</span> <span id="nitro">Nitrogen</span></div>
                    <span class="sensor-badge badge-critical"><span id="crit">Critical</span></span>
                </div>
                <div class="sensor-value" id="lval">Low</div>
                <div class="sensor-range">Green Index: 95/255</div>
                <div class="progress-bar">
                    <div class="progress-fill progress-critical" style="width: 30%;"></div>
                </div>
            </div>
        </div>

        <div class="recommendations-section">
            <h3 class="section-title" id="rtitle">üí° Recommendations</h3>
            
            <div class="recommendation-card glass">
                <div class="recommendation-title">‚ö†Ô∏è <span id="rec1">Soil is dry</span></div>
                <span class="recommendation-action">‚Üí <span id="rec1a">Water immediately</span></span>
                <span class="recommendation-action">‚Üí <span id="rec1b">Apply mulch layer</span></span>
            </div>

            <div class="recommendation-card glass">
                <div class="recommendation-title">üî¥ <span id="rec2">Nitrogen deficiency</span></div>
                <span class="recommendation-action">‚Üí <span id="rec2a">Add Neem Cake: 50g/plant</span></span>
                <span class="recommendation-action">‚Üí <span id="rec2b">Or Vermicompost: 200g</span></span>
            </div>

            <div class="recommendation-card glass">
                <div class="recommendation-title">‚úÖ <span id="rec3">pH is optimal</span></div>
                <span class="recommendation-action">‚Üí <span id="rec3a">No action needed</span></span>
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-primary" onclick="refresh()">
                üîÑ <span id="rbtn">Refresh</span>
            </button>
            <button class="btn btn-secondary" onclick="history()">
                üìä <span id="hbtn">History</span>
            </button>
        </div>
    </div>

    <script>
        const lang = {
            en: {title:'Mitti Mitra Robot',sub:'Smart Farming Assistant',status:'Connected',wtitle:'üå¶Ô∏è Weather Forecast',stitle:'üìä Sensor Readings',rtitle:'üí° Recommendations',ph:'pH Level',moist:'Moisture',nitro:'Nitrogen',opt:'Optimal',low:'Low',crit:'Critical',lval:'Low',r1:'Range:',r2:'Range:',rbtn:'Refresh',hbtn:'History',rec1:'Soil is dry',rec1a:'‚Üí Water immediately',rec1b:'‚Üí Apply mulch layer',rec2:'Nitrogen deficiency',rec2a:'‚Üí Add Neem Cake: 50g/plant',rec2b:'‚Üí Or Vermicompost: 200g',rec3:'pH is optimal',rec3a:'‚Üí No action needed'},
            hi: {title:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡§ø‡§§‡•ç‡§∞ ‡§∞‡•ã‡§¨‡•ã‡§ü',sub:'‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•á‡§§‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï',status:'‡§ú‡•Å‡§°‡§º‡§æ',wtitle:'üå¶Ô∏è ‡§Æ‡•å‡§∏‡§Æ',stitle:'üìä ‡§∏‡•á‡§Ç‡§∏‡§∞',rtitle:'üí° ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç',ph:'‡§™‡•Ä‡§è‡§ö',moist:'‡§®‡§Æ‡•Ä',nitro:'‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§®',opt:'‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ',low:'‡§ï‡§Æ',crit:'‡§ó‡§Ç‡§≠‡•Ä‡§∞',lval:'‡§ï‡§Æ',r1:'‡§∏‡•Ä‡§Æ‡§æ:',r2:'‡§∏‡•Ä‡§Æ‡§æ:',rbtn:'‡§∞‡•Ä‡§´‡•ç‡§∞‡•á‡§∂',hbtn:'‡§á‡§§‡§ø‡§π‡§æ‡§∏',rec1:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§∏‡•Ç‡§ñ‡•Ä ‡§π‡•à',rec1a:'‚Üí ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§Ç',rec1b:'‚Üí ‡§ó‡•Ä‡§≤‡•Ä ‡§ò‡§æ‡§∏ ‡§≤‡§ó‡§æ‡§è‡§Ç',rec2:'‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä',rec2a:'‚Üí ‡§®‡•Ä‡§Æ ‡§ñ‡§≤‡•Ä 50g ‡§°‡§æ‡§≤‡•á‡§Ç',rec2b:'‚Üí ‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§Æ‡•Ä‡§ï‡§Æ‡•ç‡§™‡•ã‡§∏‡•ç‡§ü 200g',rec3:'‡§™‡•Ä‡§è‡§ö ‡§†‡•Ä‡§ï ‡§π‡•à',rec3a:'‚Üí ‡§ï‡•ã‡§à ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§®‡§π‡•Ä‡§Ç'},
            ta: {title:'‡ÆÆ‡Æø‡Æü‡Øç‡Æü‡Æø ‡ÆÆ‡Æø‡Æ§‡Øç‡Æ∞‡Ææ',sub:'‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ ‡Æâ‡Æ§‡Æµ‡Æø',status:'‡Æá‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ',wtitle:'üå¶Ô∏è ‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà',stitle:'üìä ‡Æö‡ØÜ‡Æ©‡Øç‡Æö‡Ææ‡Æ∞‡Øç',rtitle:'üí° ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Æ≥‡Øç',ph:'pH',moist:'‡Æà‡Æ∞‡ÆÆ‡Øç',nitro:'‡Æ®‡Øà‡Æü‡Øç‡Æ∞‡Æú‡Æ©‡Øç',opt:'‡Æ®‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ',low:'‡Æï‡ØÅ‡Æ±‡Øà‡Æµ‡ØÅ',crit:'‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç',lval:'‡Æï‡ØÅ‡Æ±‡Øà‡Æµ‡ØÅ',r1:'‡Æµ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ØÅ:',r2:'‡Æµ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ØÅ:',rbtn:'‡Æ™‡ØÅ‡Æ§‡ØÅ‡Æ™‡Øç‡Æ™‡Æø',hbtn:'‡Æµ‡Æ∞‡Æ≤‡Ææ‡Æ±‡ØÅ',rec1:'‡ÆÆ‡Æ£‡ØçÍ±¥Ï°∞',rec1a:'‚Üí ‡Æâ‡Æü‡Æ©‡Æü‡Æø‡ÆØ‡Ææ‡Æï ‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æ™‡Ææ‡ÆØ‡Øç‡Æö‡Øç‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç',rec1b:'‚Üí ‡Æö‡Æ±‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ™‡Øã‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç',rec2:'‡Æ®‡Øà‡Æü‡Øç‡Æ∞‡Æú‡Æ©‡Øç ‡Æï‡ØÅ‡Æ±‡Øà‡Æ™‡Ææ‡Æü‡ØÅ',rec2a:'‚Üí ‡Æ®‡ØÄ‡ÆÆ‡Øç ‡Æ™‡ØÅ‡Æ£‡Øç‡Æ£‡Ææ‡Æï‡Øç‡Æï‡ØÅ 50g',rec2b:'‚Üí ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡ØÇ‡Æö‡Øç‡Æö‡Æø ‡Æâ‡Æ∞‡ÆÆ‡Øç 200g',rec3:'pH ‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æï ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ',rec3a:'‚Üí ‡Æ®‡Æü‡Æµ‡Æü‡Æø‡Æï‡Øç‡Æï‡Øà ‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà'},
            te: {title:'‡∞Æ‡∞ø‡∞ü‡±ç‡∞ü‡∞ø ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞',sub:'‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï',status:'‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç',wtitle:'üå¶Ô∏è ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç',stitle:'üìä ‡∞∏‡±Ü‡∞®‡±ç‡∞∏‡∞æ‡∞∞‡±ç',rtitle:'üí° ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å',ph:'pH',moist:'‡∞§‡±á‡∞Æ',nitro:'‡∞®‡±à‡∞ü‡±ç‡∞∞‡±ã‡∞ú‡∞®‡±ç',opt:'‡∞Æ‡∞Ç‡∞ö‡∞ø',low:'‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ',crit:'‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞Ç',lval:'‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ',r1:'‡∞™‡∞∞‡∞ø‡∞ß‡∞ø:',r2:'‡∞™‡∞∞‡∞ø‡∞ß‡∞ø:',rbtn:'‡∞∞‡∞ø‡∞´‡±ç‡∞∞‡±Ü‡∞∑‡±ç',hbtn:'‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞',rec1:'‡∞Æ‡∞ü‡±ç‡∞ü‡∞øÍ±¥Ï°∞',rec1a:'‚Üí ‡∞µ‡±Ü‡∞Ç‡∞ü‡∞®‡±á ‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å ‡∞™‡±ã‡∞Ø‡∞Ç‡∞°‡∞ø',rec1b:'‚Üí ‡∞Æ‡∞≤‡±ç‡∞ö‡±ç ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø',rec2:'‡∞®‡±à‡∞ü‡±ç‡∞∞‡±ã‡∞ú‡∞®‡±ç ‡∞ï‡±Ç‡∞∞‡±ç‡∞™‡±Å',rec2a:'‚Üí ‡∞®‡±Ä‡∞Æ‡±ç ‡∞ï‡±á‡∞ï‡±ç 50g',rec2b:'‚Üí ‡∞≤‡±á‡∞¶‡∞æ ‡∞µ‡∞∞‡±ç‡∞Æ‡±Ä‡∞ï‡∞Ç‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç 200g',rec3:'pH ‡∞∏‡∞∞‡∞ø‡∞ó‡±ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø',rec3a:'‚Üí ‡∞ö‡∞∞‡±ç‡∞Ø ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç ‡∞≤‡±á‡∞¶‡±Å'},
            mr: {title:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡§ø‡§§‡•ç‡§∞',sub:'‡§∂‡•á‡§§‡•Ä ‡§Æ‡§¶‡§§',status:'‡§ú‡•ã‡§°‡§≤‡•á',wtitle:'üå¶Ô∏è ‡§π‡§µ‡§æ‡§Æ‡§æ‡§®',stitle:'üìä ‡§∏‡•á‡§®‡•ç‡§∏‡§∞',rtitle:'üí° ‡§∏‡•Ç‡§ö‡§®‡§æ',ph:'pH',moist:'‡§ì‡§≤‡§æ‡§µ‡§æ',nitro:'‡§®‡§æ‡§Ø‡§ü‡•ç‡§∞‡•ã‡§ú‡§®',opt:'‡§ö‡§æ‡§Ç‡§ó‡§≤‡•á',low:'‡§ï‡§Æ‡•Ä',crit:'‡§ó‡§Ç‡§≠‡•Ä‡§∞',lval:'‡§ï‡§Æ‡•Ä',r1:'‡§∂‡•ç‡§∞‡•á‡§£‡•Ä:',r2:'‡§∂‡•ç‡§∞‡•á‡§£‡•Ä:',rbtn:'‡§∞‡•Ä‡§´‡•ç‡§∞‡•á‡§∂',hbtn:'‡§á‡§§‡§ø‡§π‡§æ‡§∏',rec1:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•ã‡§∞‡§°‡•Ä ‡§Ü‡§π‡•á',rec1a:'‚Üí ‡§≤‡§ó‡•á‡§ö ‡§™‡§æ‡§£‡•Ä ‡§¶‡•ç‡§Ø‡§æ',rec1b:'‚Üí ‡§Æ‡§≤‡•ç‡§ö ‡§≤‡§æ‡§µ‡§æ',rec2:'‡§®‡§æ‡§Ø‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡§Æ‡•Ä',rec2a:'‚Üí ‡§®‡•Ä‡§Æ ‡§ï‡•á‡§ï 50g',rec2b:'‚Üí ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§µ‡•ç‡§π‡§∞‡•ç‡§Æ‡•Ä‡§ï‡§Æ‡•ç‡§™‡•ã‡§∏‡•ç‡§ü 200g',rec3:'pH ‡§†‡•Ä‡§ï ‡§Ü‡§π‡•á',rec3a:'‚Üí ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§ó‡§∞‡§ú ‡§®‡§æ‡§π‡•Ä'},
            kn: {title:'‡≤Æ‡≤ø‡≤ü‡≥ç‡≤ü‡≤ø ‡≤Æ‡≤ø‡≤§‡≥ç‡≤∞',sub:'‡≤ï‡≥É‡≤∑‡≤ø ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï',status:'‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï',wtitle:'üå¶Ô∏è ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®',stitle:'üìä ‡≤∏‡≥Ü‡≤®‡≥ç‡≤∏‡≤æ‡≤∞‡≥ç',rtitle:'üí° ‡≤∏‡≥Ç‡≤ö‡≤®‡≥Ü‡≤ó‡≤≥‡≥Å',ph:'pH',moist:'‡≤§‡≥á‡≤µ‡≤æ‡≤Ç‡≤∂',nitro:'‡≤®‡≥à‡≤ü‡≥ç‡≤∞‡≥ã‡≤ú‡≤®‡≥ç',opt:'‡≤â‡≤§‡≥ç‡≤§‡≤Æ',low:'‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü',crit:'‡≤§‡≥Ä‡≤µ‡≥ç‡≤∞',lval:'‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü',r1:'‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≥ç‡≤§‡≤ø:',r2:'‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≥ç‡≤§‡≤ø:',rbtn:'‡≤∞‡≤ø‡≤´‡≥ç‡≤∞‡≥Ü‡≤∂‡≥ç',hbtn:'‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏',rec1:'‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤í‡≤£‡≤ó‡≤ø‡≤¶‡≥Ü',rec1a:'‚Üí ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤®‡≥Ä‡≤∞‡≥Å ‡≤π‡≤æ‡≤ï‡≤ø',rec1b:'‚Üí ‡≤Æ‡≤≤‡≥ç‡≤ö‡≥ç ‡≤π‡≤æ‡≤ï‡≤ø',rec2:'‡≤®‡≥à‡≤ü‡≥ç‡≤∞‡≥ã‡≤ú‡≤®‡≥ç ‡≤ï‡≥ä‡≤∞‡≤§‡≥Ü',rec2a:'‚Üí ‡≤®‡≥Ä‡≤Æ‡≥ç ‡≤ï‡≥á‡≤ï‡≥ç 50g',rec2b:'‚Üí ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤µ‡≤∞‡≥ç‡≤Æ‡≤ø‡≤ï‡≤Ç‡≤™‡≥ã‡≤∏‡≥ç‡≤ü‡≥ç 200g',rec3:'pH ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü',rec3a:'‚Üí ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤ï‡≥ç‡≤∞‡≤Æ ‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≤ø‡≤≤‡≥ç‡≤≤'},
            bn: {title:'‡¶Æ‡¶ø‡¶ü‡ßç‡¶ü‡¶ø ‡¶Æ‡¶ø‡¶§‡ßç‡¶∞',sub:'‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø',status:'‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§',wtitle:'üå¶Ô∏è ‡¶Ü‡¶¨‡¶π‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ',stitle:'üìä ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞',rtitle:'üí° ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂',ph:'pH',moist:'‡¶Ü‡¶∞‡ßç‡¶¶‡ßç‡¶∞‡¶§‡¶æ',nitro:'‡¶®‡¶æ‡¶á‡¶ü‡ßç‡¶∞‡ßã‡¶ú‡ßá‡¶®',opt:'‡¶≠‡¶æ‡¶≤',low:'‡¶ï‡¶Æ',crit:'‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø',lval:'‡¶ï‡¶Æ',r1:'‡¶∏‡ßÄ‡¶Æ‡¶æ:',r2:'‡¶∏‡ßÄ‡¶Æ‡¶æ:',rbtn:'‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂',hbtn:'‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏',rec1:'‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶∑‡ßç‡¶ï',rec1a:'‚Üí ‡¶è‡¶ñ‡¶®‡¶á ‡¶ú‡¶≤ ‡¶¶‡¶ø‡¶®',rec1b:'‚Üí ‡¶∏‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®',rec2:'‡¶®‡¶æ‡¶á‡¶ü‡ßç‡¶∞‡ßã‡¶ú‡ßá‡¶® ‡¶ò‡¶æ‡¶ü‡¶§‡¶ø',rec2a:'‚Üí ‡¶®‡¶ø‡¶Æ ‡¶ñ‡ßà‡¶≤ 50g',rec2b:'‚Üí ‡¶¨‡¶æ ‡¶≠‡¶æ‡¶∞‡ßç‡¶Æ‡¶ø‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶∏‡ßç‡¶ü 200g',rec3:'pH ‡¶∏‡¶†‡¶ø‡¶ï',rec3a:'‚Üí ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® ‡¶®‡ßá‡¶á'},
            gu: {title:'‡™Æ‡™ø‡™ü‡´ç‡™ü‡´Ä ‡™Æ‡™ø‡™§‡´ç‡™∞',sub:'‡™ñ‡´á‡™§‡´Ä ‡™Æ‡™¶‡™¶',status:'‡™ú‡´ã‡™°‡™æ‡™Ø‡´Å‡™Ç',wtitle:'üå¶Ô∏è ‡™π‡™µ‡™æ‡™Æ‡™æ‡™®',stitle:'üìä ‡™∏‡´á‡™®‡´ç‡™∏‡™∞',rtitle:'üí° ‡™∏‡™≤‡™æ‡™π',ph:'pH',moist:'‡™≠‡´á‡™ú',nitro:'‡™®‡™æ‡™à‡™ü‡´ç‡™∞‡´ã‡™ú‡™®',opt:'‡™∏‡™æ‡™∞‡´Å‡™Ç',low:'‡™ì‡™õ‡´Å‡™Ç',crit:'‡™ó‡™Ç‡™≠‡´Ä‡™∞',lval:'‡™ì‡™õ‡´Å‡™Ç',r1:'‡™∂‡´ç‡™∞‡´á‡™£‡´Ä:',r2:'‡™∂‡´ç‡™∞‡´á‡™£‡´Ä:',rbtn:'‡™∞‡™ø‡™´‡´ç‡™∞‡´á‡™∂',hbtn:'‡™á‡™§‡™ø‡™π‡™æ‡™∏',rec1:'‡™Æ‡™æ‡™ü‡´ÄÍ±¥Ï°∞',rec1a:'‚Üí ‡™§‡™∞‡™§ ‡™ú ‡™™‡™æ‡™£‡´Ä ‡™Ü‡™™‡´ã',rec1b:'‚Üí ‡™Ö‡™õ‡™æ‡™∞ ‡™™‡´ã‡™§‡™æ‡™∞ ‡™ï‡™∞‡´ã',rec2:'‡™®‡™æ‡™à‡™ü‡´ç‡™∞‡´ã‡™ú‡™® ‡™ò‡™ü',rec2a:'‚Üí ‡™®‡´Ä‡™Æ ‡™ï‡´á‡™ï 50g',rec2b:'‚Üí ‡™Ö‡™•‡™µ‡™æ ‡™µ‡™∞‡´ç‡™Æ‡´Ä‡™ï‡™Æ‡´ç‡™™‡´ã‡™∏‡´ç‡™ü 200g',rec3:'pH ‡™∏‡™æ‡™∞‡´Å‡™Ç ‡™õ‡´á',rec3a:'‚Üí ‡™ï‡´ã‡™à ‡™™‡™ó‡™≤‡™æ‡™Ç ‡™Ü‡™µ‡™∂‡´ç‡™Ø‡™ï ‡™®‡™•‡´Ä'},
            pa: {title:'‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®Æ‡®ø‡©±‡®§‡®∞',sub:'‡®ñ‡©á‡®§‡©Ä ‡®∏‡®π‡®æ‡®á‡®ï',status:'‡®ú‡©Å‡©ú‡®ø‡®Ü',wtitle:'üå¶Ô∏è ‡®Æ‡©å‡®∏‡®Æ',stitle:'üìä ‡®∏‡©à‡®Ç‡®∏‡®∞',rtitle:'üí° ‡®∏‡®≤‡®æ‡®π',ph:'pH',moist:'‡®®‡®Æ‡©Ä',nitro:'‡®®‡®æ‡®à‡®ü‡©ç‡®∞‡©ã‡®ú‡®®',opt:'‡®µ‡®ß‡©Ä‡®Ü',low:'‡®ò‡©±‡®ü',crit:'‡®ó‡©∞‡®≠‡©Ä‡®∞',lval:'‡®ò‡©±‡®ü',r1:'‡®∞‡©á‡®Ç‡®ú:',r2:'‡®∞‡©á‡®Ç‡®ú:',rbtn:'‡®§‡®æ‡®ú‡®º‡®æ',hbtn:'‡®á‡®§‡®ø‡®π‡®æ‡®∏',rec1:'‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®ñ‡©Å‡®∏‡®º‡®ï',rec1a:'‚Üí ‡®´‡©å‡®∞‡®® ‡®™‡®æ‡®£‡©Ä ‡®¶‡®ø‡®ì',rec1b:'‚Üí ‡®Æ‡®≤‡®ö ‡®≤‡®æ‡®ì',rec2:'‡®®‡®æ‡®à‡®ü‡©ç‡®∞‡©ã‡®ú‡®® ‡®ò‡®æ‡®ü',rec2a:'‚Üí ‡®®‡©Ä‡®Æ ‡®ï‡©á‡®ï 50g',rec2b:'‚Üí ‡®ú ‡®µ‡®∞‡®Æ‡©Ä‡®ï‡®Æ‡®™‡©ã‡®∏‡®ü 200g',rec3:'pH ‡®†‡©Ä‡®ï ‡®π‡©à',rec3a:'‚Üí ‡®ï‡©ã‡®à ‡®ï‡®æ‡®∞ ‡®µ‡®æ‡®à ‡®®‡®π‡©Ä‡®Ç'},
            ml: {title:'‡¥Æ‡¥ø‡¥ü‡µç‡¥ü‡¥ø ‡¥Æ‡¥ø‡¥§‡µç‡¥∞',sub:'‡¥ï‡µÉ‡¥∑‡¥ø ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø',status:'‡¥ï‡¥£‡¥ï‡µç‡¥±‡µç‡¥±‡¥°‡µç',wtitle:'üå¶Ô∏è ‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥•',stitle:'üìä ‡¥∏‡µÜ‡µª‡¥∏‡µº',rtitle:'üí° ‡¥®‡¥ø‡µº‡¥¶‡µç‡¥¶‡µá‡¥∂‡¥Ç',ph:'pH',moist:'‡¥à‡µº‡¥™‡µç‡¥™‡¥Ç',nitro:'‡¥®‡µà‡¥ü‡µç‡¥∞‡¥ú‡µª',opt:'‡¥®‡¥≤‡µç‡¥≤‡¥§‡µç',low:'‡¥ï‡µÅ‡¥±‡¥µ‡µç',crit:'‡¥ó‡µÅ‡¥∞‡µÅ‡¥§‡¥∞‡¥Ç',lval:'‡¥ï‡µÅ‡¥±‡¥µ‡µç',r1:'‡¥™‡¥∞‡¥ø‡¥ß‡¥ø:',r2:'‡¥™‡¥∞‡¥ø‡¥ß‡¥ø:',rbtn:'‡¥±‡¥ø‡¥´‡µç‡¥∞‡¥∑‡µç',hbtn:'‡¥ö‡¥∞‡¥ø‡¥§‡µç‡¥∞‡¥Ç',rec1:'‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥ï‡¥æ‡¥ü‡¥ø‡¥ï‡¥ø‡¥ü‡µç‡¥ü‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ',rec1a:'‚Üí ‡¥â‡¥ü‡¥®‡µÜ ‡¥µ‡µÜ‡¥≥‡µç‡¥≥‡¥Ç ‡¥í‡¥¥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï',rec1b:'‚Üí ‡¥Æ‡µΩ‡¥ö‡µç‡¥ö‡µç ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥ï',rec2:'‡¥®‡µà‡¥ü‡µç‡¥∞‡¥ú‡µª ‡¥ï‡µÅ‡¥±‡¥µ‡µç',rec2a:'‚Üí ‡¥®‡µÄ‡¥Ç ‡¥ï‡µá‡¥ï‡µç 50g',rec2b:'‚Üí ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥µ‡µÜ‡µº‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡µä‡¥Æ‡µç‡¥™‡µã‡¥∏‡µç‡¥±‡µç‡¥±‡µç 200g',rec3:'pH ‡¥∏‡¥∞‡¥ø‡¥Ø‡¥æ‡¥£‡µç',rec3a:'‚Üí ‡¥í‡¥∞‡µÅ ‡¥®‡¥ü‡¥™‡¥ü‡¥ø‡¥Ø‡µÅ‡¥Ç ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥ø‡¥≤‡µç‡¥≤'},
            or: {title:'‡¨Æ‡¨ø‡¨ü‡¨ø ‡¨Æ‡¨ø‡¨§‡≠ç‡¨∞',sub:'‡¨ï‡≠É‡¨∑‡¨ø ‡¨∏‡¨π‡¨æ‡≠ü‡¨ï',status:'‡¨∏‡¨Ç‡¨Ø‡≠Å‡¨ï‡≠ç‡¨§',wtitle:'üå¶Ô∏è ‡¨™‡¨æ‡¨£‡¨ø‡¨™‡¨æ‡¨ó',stitle:'üìä ‡¨∏‡≠á‡¨®‡≠ç‡¨∏‡¨∞',rtitle:'üí° ‡¨™‡¨∞‡¨æ‡¨Æ‡¨∞‡≠ç‡¨∂',ph:'pH',moist:'‡¨Ü‡¨∞‡≠ç‡¨¶‡≠ç‡¨∞‡¨§‡¨æ',nitro:'‡¨®‡¨æ‡¨á‡¨ü‡≠ç‡¨∞‡≠ã‡¨ú‡≠á‡¨®',opt:'‡¨â‡¨§‡≠ç‡¨§‡¨Æ',low:'‡¨ï‡¨Æ‡≠ç',crit:'‡¨ó‡≠Å‡¨∞‡≠Å‡¨§‡¨∞',lval:'‡¨ï‡¨Æ‡≠ç',r1:'‡¨∏‡≠Ä‡¨Æ‡¨æ:',r2:'‡¨∏‡≠Ä‡¨Æ‡¨æ:',rbtn:'‡¨∞‡¨ø‡¨´‡≠ç‡¨∞‡≠á‡¨∂',hbtn:'‡¨á‡¨§‡¨ø‡¨π‡¨æ‡¨∏',rec1:'‡¨Æ‡¨æ‡¨ü‡¨ø ‡¨∂‡≠Å‡¨∑‡≠ç‡¨ï',rec1a:'‚Üí ‡¨§‡¨•‡¨ï‡≠ç‡¨∑‡¨£‡¨æ‡¨§ ‡¨ú‡¨≥ ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å',rec1b:'‚Üí ‡¨Æ‡¨≤‡≠ç‡¨ö ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å',rec2:'‡¨®‡¨æ‡¨á‡¨ü‡≠ç‡¨∞‡≠ã‡¨ú‡≠á‡¨® ‡¨Ö‡¨≠‡¨æ‡¨¨',rec2a:'‚Üí ‡¨®‡¨ø‡¨Æ ‡¨ï‡≠á‡¨ï 50g',rec2b:'‚Üí ‡¨ï‡¨ø‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨≠‡¨∞‡≠ç‡¨Æ‡¨ø‡¨ï‡¨Æ‡≠ç‡¨™‡≠ã‡¨∑‡≠ç‡¨ü 200g',rec3:'pH ‡¨†‡¨ø‡¨ï ‡¨Ö‡¨õ‡¨ø',rec3a:'‚Üí ‡¨ï‡≠å‡¨£‡¨∏‡¨ø ‡¨™‡¨¶‡¨ï‡≠ç‡¨∑‡≠á‡¨™ ‡¨Ü‡¨¨‡¨∂‡≠ç‡≠ü‡¨ï ‡¨®‡¨æ‡¨π‡¨ø‡¨Å'}
        };

        async function getWeather(lat, lon) {
            try {
                const res = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,weathercode&timezone=Asia/Kolkata&forecast_days=7`,
                    { mode: 'cors' }
                );
                if (!res.ok) throw new Error('API error');
                return await res.json();
            } catch(e) {
                console.error('Weather error:', e);
                return null;
            }
        }

        function getWeatherIcon(code) {
            if (code === 0 || code === 1) return '‚òÄÔ∏è';
            if (code === 2 || code === 3) return '‚õÖ';
            if (code === 45 || code === 48) return 'üå´Ô∏è';
            if (code >= 51 && code <= 67) return 'üåßÔ∏è';
            if (code >= 71 && code <= 77) return '‚ùÑÔ∏è';
            if (code >= 80 && code <= 82) return 'üåßÔ∏è';
            if (code >= 85 && code <= 86) return 'üå®Ô∏è';
            if (code >= 95) return '‚õàÔ∏è';
            return 'üå§Ô∏è';
        }

        async function loadWeather() {
            const box = document.getElementById('weatherBox');
            const coords = document.getElementById('regionSelect').value.split(',');
            const lat = parseFloat(coords[0]);
            const lon = parseFloat(coords[1]);
            
            box.innerHTML = '<div class="loading">Loading weather...</div>';
            
            const data = await getWeather(lat, lon);
            
            if (!data) {
                box.innerHTML = '<div class="loading">Weather unavailable</div>';
                return;
            }

            box.innerHTML = '';
            const daily = data.daily;
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const today = new Date().getDay();

            for (let i = 0; i < 7; i++) {
                const dayIndex = (today + i) % 7;
                const dayName = i === 0 ? 'Today' : days[dayIndex];
                const maxTemp = Math.round(daily.temperature_2m_max[i]);
                const minTemp = Math.round(daily.temperature_2m_min[i]);
                const code = daily.weathercode[i];

                const card = document.createElement('div');
                card.className = 'weather-card glass';
                card.innerHTML = `
                    <div class="weather-city" style="margin-bottom: 12px;">${dayName}</div>
                    <div style="font-size: 32px; margin: 8px 0;">${getWeatherIcon(code)}</div>
                    <div class="weather-temp">${maxTemp}¬∞</div>
                    <div style="font-size: 12px; color: rgba(201, 209, 217, 0.6); margin-bottom: 8px;">${minTemp}¬∞</div>
                    <div class="weather-condition">${data.daily.weathercode[i] ? 'Fair' : 'Clear'}</div>
                    ${data.daily.precipitation_probability_max[i] > 30 ? `<div style="color: #22d3ee; font-size: 11px; margin-top: 5px;">üíß ${data.daily.precipitation_probability_max[i]}%</div>` : ''}
                `;
                box.appendChild(card);
            }
        }

        function changeLang() {
            const l = document.getElementById('langSelect').value;
            const t = lang[l];
            Object.keys(t).forEach(k => {
                const el = document.getElementById(k);
                if(el) el.textContent = t[k];
            });
        }

        function refresh() {
            loadWeather();
        }

        function history() {
            alert('üìä Opening history...');
        }

        document.getElementById('langSelect').addEventListener('change', changeLang);
        document.getElementById('regionSelect').addEventListener('change', loadWeather);

        loadWeather();

        setInterval(() => {
            const m = Math.floor(Math.random() * 5) + 1;
            document.getElementById('time').textContent = `${m} min ago`;
        }, 60000);
    </script>
</body>
</html>
